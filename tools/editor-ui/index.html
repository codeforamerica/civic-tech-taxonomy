
<html>
	<head>
	<title>Civic Tech Taxonomy</title>

	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jstree/3.2.1/themes/default/style.min.css" />
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jstree/3.2.1/jstree.min.js"></script>
	<script src="https://requirejs.org/docs/release/2.3.5/minified/require.js"></script>

	<style type="text/css">
	li.jstree-leaf > a .jstree-icon { display: none; }
	</style>

	</head>

	<body style="font-family:Arial">

	<H2><center>Taxonomy Viewer</center></H2>
	These are all the topics retrieved by the CfA Index crawler and their manually associated synonyms.
	<br>
	This is a draft/prototype, <a href="javascript:todo();">see the documentation</a> or the github repository if you are interested to learn more about this project.
	<hr>
	<table border=0 width="80%">
	<tr>
	<td valign="top">
	This is how items are being classified in the codeforamerica github <a href="https://github.com/codeforamerica/civic-tech-taxonomy" target="new">Taxonomy</a> repo.
	<br>
	This tree is populated from the json returned by the Taxonomy API at <a href="https://api.taxonomy.sandbox.k8s.brigade.cloud/taxonomy">https://api.taxonomy.sandbox.k8s.brigade.cloud/taxonomy</a>
	<br>
	<i>Empty folders are because there is a file in the taxonomy project but didn't find a good use of it yet.</i>
	</td>
	</tr>
	<tr>
	<td>
	<hr>Search <input id="search-input" class="search-input" />
	</td>
	</tr>
	<tr>
	<td valign="top"><hr><div id="taxonomy_jstree"></div></td>
	</tr>
	</table>

	<br>

	</body>

	<script type="text/javascript">


	$.getJSON( "https://api.taxonomy.sandbox.k8s.brigade.cloud/taxonomy", function( data ) {
		$('#taxonomy_jstree').jstree({ 'core' : {
			"check_callback": false,
			"multiple": false,
			"data" : data
		},
		"plugins": ["search"],
		"search": {
			"case_sensitive": false,
			"show_only_matches": true
		}})
		.on("hover_node.jstree",function(e,data){
			if(data.node.parent != "#") {
				$("#"+data.node.id).prop("title", data.node.id);
			}
		})
	});

	$(document).ready(function () {
		$(".search-input").keyup(function () {
			var searchString = $(this).val();
			$('#taxonomy_jstree').jstree('search', searchString);
		});

		$(".search").keypress(function () {
			var keycode = (event.keyCode ? event.keyCode : event.which);
			if(keycode == "13") {
				var searchString2 = $(this).val();
				$('#orphans_jstree').jstree('search', searchString2);
			}
		});
	});



	</script>

	</html>